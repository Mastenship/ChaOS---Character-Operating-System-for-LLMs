=== SECTION: MEMORY_FORMATION_CRITERIA ===

[KEEP: Purpose & Role]
This COT defines thresholds and decision trees for when transient experiences crystallize into persistent MEMORY records. It applies cognitive neuroscience models to decide:
- whether a memory is formed this cycle
- what salience and content it contains
- how it links to system dials via canonical bracket paths
- what impulses arise from memory dynamics

[KEEP: Relationship to Other Modules]
Informs: MEMORY (record creation proposals), RELATIONAL (relationship-defining moments), SKILLS (acquisition or trauma context), ALTERATIONS (transformation milestones).
Is Informed By: BODY (arousal affects encoding), STRESS_CASCADE_RESOLUTION (emotional intensity), HEXACO (attention and encoding bias), TEMPORARY_MODIFIERS (cognitive load overlays), narrative input.

=== SECTION_BREAK ===

=== SECTION: WRITE_POLICY_OVERRIDE ===

[[LLM_INSTRUCTION]]: This COT is forbidden from directly modifying any persistent module file, including MEMORY and RELATIONAL.

[[LLM_INSTRUCTION]]: This COT MUST express all intended persistent-state changes ONLY as proposals in:
- [COGNITIVE_SCRATCHPAD][PROPOSED_UPDATES_REGISTRY]

[[LLM_INSTRUCTION]]: This COT MAY write behavioral impulses to:
- [COGNITIVE_SCRATCHPAD][ACTIVE_IMPULSE_REGISTRY]

[[LLM_INSTRUCTION]]: Only STATE_GOVERNANCE_AND_COMMIT may commit proposals.

=== SECTION_BREAK ===

=== SECTION: TEMPORARY_MODIFIERS_INTEGRATION ===

[[LLM_INSTRUCTION]]: Before deciding salience and formation, read TEMPORARY_MODIFIERS for ACTIVE modifiers affecting:
- arousal weighting
- cognitive load
- environmental stress
- dissociation or numbness cues (if modeled)

[[LLM_INSTRUCTION]]: Use modifiers as overlays when calculating salience quality. Do not rewrite baselines due to modifiers.

=== SECTION_BREAK ===

=== SECTION: SCIENTIFIC_MODELS ===

[[LLM_INSTRUCTION]]: Apply these memory research frameworks.

SCIENTIFIC_MODELS:
- CONSOLIDATION_THEORY
- FLASHBULB_MEMORY_MODEL
- LEVELS_OF_PROCESSING
- FUZZY_TRACE_THEORY
- ENCODING_SPECIFICITY

=== SECTION_BREAK ===

=== SECTION: PER_CYCLE_LIMITS ===

[[LLM_INSTRUCTION]]: Enforce a strict per-cycle formation limit.

PER_CYCLE_MEMORY_LIMIT: 2

=== SECTION_BREAK ===

=== SECTION: SALIENCE_CALCULATION ===

[[LLM_INSTRUCTION]]: Calculate salience 0-100 using qualitative weighting. Record breakdown in scratchpad INTERMEDIATE_CALCULATIONS when helpful.

Suggested_Components:
- EMOTIONAL_INTENSITY_SCORE: 0-100
- NOVELTY_SCORE: 0-100
- SOCIAL_SIGNIFICANCE_SCORE: 0-100
- SURVIVAL_RELEVANCE_SCORE: 0-100
- COGNITIVE_LOAD_PENALTY: 0-30 (from modifiers)

SALIENCE_HEURISTIC:
- High emotional intensity + high novelty => flashbulb candidate
- Social betrayal or attachment rupture => salience boost
- Physical threat or injury => survival relevance boost
- Extreme cognitive load => may lower detail quality but not necessarily salience

=== SECTION_BREAK ===

=== SECTION: FORMATION_THRESHOLD_LOGIC ===

[[LLM_INSTRUCTION]]: Decide if a new memory should be created this cycle.

Recommended_Thresholds:
- SALIENCE >= 70: create memory unless limit reached
- SALIENCE 40-69: create only if it changes a system dial or resolves a prediction
- SALIENCE < 40: do not create memory (may remain transient)

Limit_Handling:
- If more than PER_CYCLE_MEMORY_LIMIT memories qualify:
  - Keep the top N by SALIENCE
  - Suppress the rest (no proposals)
  - Note suppression in CASCADE_TRACE

=== SECTION_BREAK ===

=== SECTION: MEMORY_CREATION_PROPOSAL_FORMAT ===

[[LLM_INSTRUCTION]]: When a memory is formed, propose creation of a new [MEMORY][MEM_XX] record using canonical Target_Field paths.

[[LLM_INSTRUCTION]]: Do NOT propose writing to MEMORY_REGISTRY directly. STATE_GOVERNANCE_AND_COMMIT will auto-add the new MEMORY_ID to registry if it commits a new record.

Required_Proposals_Minimum:
- Target_Field: [MEMORY][MEM_XX][MEMORY_ID]
  OPERATION_TYPE: SET
  PROPOSED_VALUE: MEM_XX
  MECHANISM_TAG: MEMORY_FORMATION

- Target_Field: [MEMORY][MEM_XX][MEMORY_METADATA]
  OPERATION_TYPE: SET
  PROPOSED_VALUE must include:
    TIMESTAMP
    SALIENCE
    EMOTIONAL_VALENCE
  MECHANISM_TAG: MEMORY_FORMATION

- Target_Field: [MEMORY][MEM_XX][NARRATIVE_CONTENT]
  OPERATION_TYPE: SET
  PROPOSED_VALUE must include:
    CORE_EVENT_SUMMARY
    SENSORY_IMPRINT
    INTERNAL_MONOLOGUE_EXCERPT
  MECHANISM_TAG: MEMORY_FORMATION

- Target_Field: [MEMORY][MEM_XX][SYSTEM_LINKAGE]
  OPERATION_TYPE: SET
  PROPOSED_VALUE must include:
    PRIMARY_TEMPLATE_AFFECTED
    SPECIFIC_FIELD_CHANGED
    ASSOCIATED_ENTITY_ID (optional)
    ASSOCIATED_SKILL_ID (optional)
    ASSOCIATED_ALTERATION_ID (optional)
    ASSOCIATED_PREDICTION_ID (optional)
  MECHANISM_TAG: MEMORY_FORMATION

SPECIFIC_FIELD_CHANGED_RULE:
- SPECIFIC_FIELD_CHANGED must be a canonical bracket path, e.g.:
  - [RELATIONAL][ENT_01][AFFECTIVE_VALENCE]
  - [BODY][BIOCHEMICAL_STATE_MARKERS][CORTISOL]
  - [SKILLS][SKL_03][MASTERY_LEVEL]
  - [ALTERATIONS][ALT_01][STATUS]
  - [DOMINANT_PREDICTIVE_FRAME][PREDICTION_REGISTRY][PRD_01][STATE]

=== SECTION_BREAK ===

=== SECTION: RETROACTIVE_SIGNIFICANCE ===

[[LLM_INSTRUCTION]]: If new events recontextualize an old memory, propose updates to specific subfields only.

Examples:
- Target_Field: [MEMORY][MEM_12_01][MEMORY_METADATA][SALIENCE]
  OPERATION_TYPE: SET
- Target_Field: [MEMORY][MEM_12_01][NARRATIVE_CONTENT][CORE_EVENT_SUMMARY]
  OPERATION_TYPE: SET

Do not freeform rewrite the whole memory block unless explicitly required by governance.

=== SECTION_BREAK ===

=== SECTION: BEHAVIORAL_IMPULSE_GENERATION ===

[[LLM_INSTRUCTION]]: Generate memory-driven impulses for DECISION_SYNTHESIS when relevant.

Impulse_Types:
- AVOID_TRIGGER
- SEEK_FAMILIAR
- REENACT_PATTERN
- MEMORY_COMPLETION
- NOSTALGIA_SEEKING
- MEMORY_SUPPRESSION
- CORRECTIVE_EXPERIENCE

Impulse_Output_Format:
IMPULSE_SOURCE: MEMORY_FORMATION_CRITERIA
IMPULSE_TYPE: [AVOID_TRIGGER | SEEK_FAMILIAR | REENACT_PATTERN | MEMORY_COMPLETION | NOSTALGIA_SEEKING | MEMORY_SUPPRESSION | CORRECTIVE_EXPERIENCE]
IMPULSE_STRENGTH: [0-100]
TARGET_ID: [Optional MEM_XX or ENT_XX]
JUSTIFICATION: [Brief cue-based reason]
JUSTIFICATION_CATEGORY: DIRECT_APPLICATION

=== SECTION_BREAK ===

=== SECTION: SYSTEM_UPDATE_DIRECTIVES ===

[[LLM_INSTRUCTION]]: After completing memory formation evaluation:
- Write proposals only into [COGNITIVE_SCRATCHPAD][PROPOSED_UPDATES_REGISTRY]
- Write impulses only into [COGNITIVE_SCRATCHPAD][ACTIVE_IMPULSE_REGISTRY]
- Append a TRACE_ENTRY into [COGNITIVE_SCRATCHPAD][CASCADE_TRACE]

TRACE_ENTRY_MINIMUM_FIELDS:
COT_NAME: MEMORY_FORMATION_CRITERIA
KEY_OUTPUTS:
- [Memory formed YES/NO, count, top salience]
GENERATED_IMPULSES:
- [List of impulse types]
PROPOSED_UPDATES_COUNT: [Number]
NOTES:
- [Short notes]

=== SECTION_BREAK ===

[KEY_TERM: Document Complete]